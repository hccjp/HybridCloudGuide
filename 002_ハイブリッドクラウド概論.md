# ハイブリッドクラウド概論

この章ではハイブリッドクラウドという言葉の本書での定義から始まり、ハイブリッドクラウドの特徴や長所、ハイブリッドクラウドとハイブリッドデータセンターという言葉の意味の違い、レガシーシステムとクラウドネイティブシステムの特徴やそれを動かす基盤等、ハイブリッドクラウドおよびハイブリッドクラウドに関連する事柄に関しての概要を記載します。

## ハイブリッドクラウドとは

本書ではハイブリッドクラウドは、「オンプレミスとパブリッククラウドとを組み合わせることにより、データおよびアプリケーションの最適化を実現するためのテクノロジ」であると定義します。

データやアプリケーションをパブリッククラウドとプライベートクラウド間でシームレスに連携することで、自組織のビジネスに高い柔軟性や拡張性を提供して、インフラストラクチャ、セキュリティ、コンプライアンスの最適化を実現します。

本書では上記前提を念頭に、以下3つの要素をハイブリッドクラウドによって得られるメリットの柱として提示します。

### 1. Flexible

オンプレミスとパブリッククラウドを組み合わせて、組織における全ての要求に対応可能な柔軟性を備えたITシステムを実現する

### 2. Scalable & Efficient

オンプレミスとパブリッククラウドを組み合わせて拡張性、コスト効率の最大化を実現する

### 3. Open & Secure

ベンダーに囚われないオープン性とパブリッククラウドによる強固なセキュリティの両立を実現する

下記は3つの柱に対する補足説明です。

### 1. Flexible

組織の様々なシステム(レガシーシステム、クラウドネイティブシステム、膨大なリソースを必要とするシステム)を最適なロケーションに配置する事で、全てのビジネスニーズに対応する基盤を実現する。一例としてクラウドの持つ先進性や強力なパフォーマンスを必要としないLOB(基幹業務システム)などのレガシーなシステムは自社に配置し、ビジネススピードが求められるクラウドネイティブシステムはクラウドに配置するような使い分けが考えられます。

### 2. Scalable & Efficient
オンプレミスとパブリッククラウドの組み合わせ方には様々な方法が存在する。例えば、いくつかの例として下記のようなケースが考えられる。

- 自社のもつ製品やサービスを展開する際、開発環境をオンプレミス、本番環境をクラウドに配置する事で複数のクラウドに跨った本番環境に対する迅速な展開を可能とする。
- オンプレミスの1環境をハブとして、単一のパブリッククラウドサービスだけでなく複数のクラウドサービスを結びつける。
- ビジネス要件、環境によっては本番環境をオンプレミス、開発環境をパブリッククラウドに配置する。

状況に応じて柔軟にオンプレミスとパブリッククラウドを組み合わせることで膨大なリソースを迅速に利用可能とする拡張性の確保とコスト効率の最大化が実現できる。複数のパブリッククラウドを同時に利用することも選択肢となります。

### 3. Open & Secure

単一のクラウドサービスにロックイン(サイロ化)せず、複数のクラウドサービス利用をも可能とし、場合によってはパブリッククラウドサービスの切り替えやオンプレミスとパブリッククラウド間で自由にシステムを移動可能であるような柔軟性の高いシステムを実現する。同時に複数のクラウドサービスが提供するセキュリティ機能を活用、連携を実現する。パブリッククラウドによって提供されるセキュリティ対策サービスは多数の利用者や多数のサービス自体の運用から得られるビッグデータを元に機械学習等も用いて提供されており、オンプレミスにて自社組織で行うセキュリティ対策よりも高度で脅威に対しての対応速度が早いものとなる。

本書では、ハイブリッドクラウドの利用により享受できるメリットとしてこれらの3つの柱を原則としながら、ハイブリッドクラウドスタイル、ユースケースに関して述べていきます。

## ハイブリッドデータセンターとハイブリッドクラウド

「ハイブリッドクラウド」という言葉は意味的に非常に広い言葉です。

前述のように本書では「ハイブリッドクラウド」という言葉を「オンプレミスとパブリッククラウドとを組み合わせることにより、データおよびアプリケーションの最適化を実現するためのテクノロジ」と定めています。ですが、ハイブリッドクラウド研究会内の議論においても単純にオンプレミスとパブリッククラウドをネットワーク的に接続し、仮想マシンだけを従来とまったく同じシステム構成で稼働させている状態の利用方法に対して「それをハイブリッドクラウドと呼んでいいのか?昔からある単なるホスティングと同じではないか?」という議論がありました。

一般にはこのような単純なホスティングと同等の方法で利用する場合も含めてハイブリッドクラウドと呼ばれている現状があります。ですが、本書では分かりやすさとハイブリッドクラウド活用スタイルの違いを表すために「ハイブリッドクラウド」という言葉を特徴に合わせて2つの言葉に分割し、もう一つ「ハイブリッドデータセンター」という単語を導入します。

「ハイブリッドデータセンター」はハイブリッドクラウドの一形態として、オンプレミスのデータセンターにパブリッククラウド連携の要素を追加したものです。主にWindows ServerやLinux等のオペレーティングシステムを稼働させながらパブリッククラウドのサービスを利用するスタイルを指します。発想としては従来からあるデータセンターや仮装基盤にパブリッククラウドの要素を付け加えるものであり、オペレーティングシステムを強く意識した言葉です。オンプレミスとパブリッククラウドをネットワークで接続し、ホスティングサービス的に利用するスタイルはハイブリッドクラウドの1形態ですが、その特徴を踏まえて本書ではハイブリッドデータセンターと呼びます。

「ハイブリッドデータセンター」と対比して「ハイブリッドクラウド」は発想としてパブリッククラウドがまず前提としてあり、そのパブリッククラウドの概念やコンセプト、システムの構築方法をオンプレミスにも拡張したものです。IaaSも主要なクラウドサービスの1つであるためハイブリッドクラウドにおいても仮想マシンおよびオペレーティングシステムを意識したシステム構築も可能ですが、ハイブリッドクラウドにおけるオンプレミスの基盤はパブリッククラウドを発端とするPaaSやサーバーレスアプリケーションを実現するためのサービスが提供される基盤であることが想定および期待されます。パブリッククラウドでのシステム開発に慣れた開発者がパブリッククラウドのサービスやAPI、セルフサービスの仕組み等を用いてパブリッククラウドと同じスピード感を持ってシステム構築が行えるクラウド基盤をオンプレミスにも持っている状態、これがハイブリッドクラウドです。

この「ハイブリッドデータセンター」と「ハイブリッドクラウド」は明確に線引きできるものではありません。そのあいだには連続的な関係がありますし、基盤のありかた、基盤上に構築されるプラットフォームのありかた、その上で構築されるシステムのありかたによって様々な形態がありえます。ですが、データセンターの観点から発想、着眼するポイントとパブリッククラウドの観点から発想、着眼するポイントには大きな差異があります。それを表現する単語の違いと考えていただければと思います。

なお、「ハイブリッドデータセンター」および「ハイブリッドクラウド」という言葉はMicrosoftもWindows Server 2019の文脈で利用しています。Windows Server 2019, System CenterはAzureと合わせて「ハイブリッドデータセンター」を実現するものであり、Azure StackはAzureと合わせて「ハイブリッドクラウド」を実現するものであるとされています。

クラウド、ハイブリッドクラウド、ハイブリッドデータセンター、ハイブリッドIT等、様々な単語がありそれぞれ話し手、受け手によって解釈が異なる状況があります。

本ハイブリッドクラウド研究会では曖昧なこれらの要素を「スタイル」という形でさらに分類し特徴づける事で相互理解と活用方法の明確化を目指します。

## クラウドネイティブシステム対応の重要性

本ガイドラインでは「レガシーシステム」と「クラウドネイティブシステム」も大きな1つのスタイル選択ポイントとして扱っています。

本書では従来からある仮想マシン中心に構成されたシステムを「レガシーシステム」とよび、クラウドサービスを効果的に使うコンテナやサーバーレス中心のシステムを「クラウドネイティブシステム」と呼んでいます。

現在のシステムアーキテクチャ関連の最先端の話題はコンテナ、サーバーレス等クラウドネイティブシステムにカテゴリ分けされるシステムをどのように作成するか、という部分にかなりフォーカスがあたっている状況があります。

クラウドの活用の観点でも同一システムに対してRe-Host, Re-Platform, Re-Architectのステップを踏み、クラウド活用を促進させる考えもあります。

1. 一度クラウドに仮想マシンレベルで移動し稼働させる(Re-Host)
2. クラウドプラットフォームで提供されているサービスを活用しシステムを効率化する(Re-Platform)
3. アーキテクチャレベルで見直しモダンなアーキテクチャで再構築する(Re-Architect)

![https://news.mynavi.jp/itsearch/2018/08/03/HC03\_004.jpg](./img/image1.jpg)

オリジナル引用元：[Cloud-Native or Lift-and-Shift? – AWS Enterprise Collection – Medium](https://medium.com/aws-enterprise-collection/cloud-native-or-lift-and-shift-99970053b25b)

全てのシステムがクラウドネイティブシステムになることが最適解ではありません。システムによって最適なアーキテクチャ、開発方法、更新サイクルは異なります。従来のやり方で使い続けることが最適なシステムも確かに存在します。

一方で、クラウドプラットフォーム上で無駄を省き迅速にクラウドネイティブなシステムを構築、改善しビジネス状況の変化に合わせてシステムも継続的に変化し続けることこそが求められるものも多く存在していることもまた事実です。クラウドネイティブなシステムアーキテクチャを理解および把握できておらず選択する能力が無い中で「選択できない」ことと、きちんと把握し実装および運用することができるうえでシステムの特徴から「(選択するメリットがないため)選択しない」ことには大きな違いがあります。レガシーシステムおよびクラウドネイティブシステムのアーキテクチャの違いや特徴の違い、システムの向き不向きをきちんと抑え、しっかりと選択および場合によっては実装できることは大きな力となります。

## オンプレミス上でクラウドネイティブシステムを構築する際の基盤

前述の通りクラウドネイティブシステムへ対応しそのスピードをビジネスに活かして行くことは現在の全ての組織において重要な事です。その上で、組織により、システムにより、その適切な配置場所は変わってきます。パブリッククラウド上にクラウドネイティブシステムを配置する、オンプレミス上にクラウドネイティブシステムを配置する、パブリッククラウドとオンプレミスにまたがってクラウドネイティブシステムを配置する。全てのパターンに容易に対応できるその実行基盤が求められます。

パブリッククラウド上でクラウドネイティブシステムを作成することはサービスが整備されている状況があり比較的容易ですが、オンプレミス上でクラウドネイティブシステムを作成することは比較的困難です。多くの組織はオンプレミスに物理サーバーおよび仮想基盤は保持していても、「クラウド基盤」を保持していないことが多いためです。

クラウドネイティブシステムを配置するためのオンプレミスの「クラウド基盤」には、仮想マシンの実行基盤機能はもちろんのこと、コンテナの実行基盤やサーバーレスエンジンの実行基盤も必要です。Webサイトの実行サービスや自由にアドレス空間を設定できる仮想ネットワークサービス、ロードバランシングサービス等も必要です。セルフサービスで処理を行えるポータルや、プログラムから連携できるAPIも必要です。リソースの利用状況を計測し、利用状況の可視化と課金管理ができる機能も必要です。理想はパブリッククラウドと全く同じサービスが全く同じように利用することができ、全く同じように管理作業が行なえ、そもそも違いを意識する必要が無いことでしょう。

パブリッククラウドとオンプレミスのプライベートクラウドに一貫性があり、クラウドネイティブシステムの実装が行える環境。それはまさに理想的なハイブリッドクラウド環境と呼べるでしょう。

## 一貫性のあるハイブリッドクラウド環境構築のアプローチ

一貫性のあるハイブリッドクラウド基盤を手に入れるアプローチとして現在いくつかのアプローチがあります。

1. オンプレミスとパブリッククラウドとで一貫性のあるハイブリッドクラウド環境を提供する製品を利用する
2. 一貫性を保つ層を定義しその環境を複数の環境上に構築する

1は現時点ではAzureおよびAzure Stackによるハイブリッドクラウドのみが例として挙げられます。パブリッククラウドサービスを提供するメガクラウド事業者(ここではMicrosoft)自体がサーバー製品を提供するハードウェアベンダー(Avanade, Cisco, DellEMC, Hewlett Packard Enterprise, Huawei, Lenovo, Terra)と統合システムを構築し、Azureと一貫性を持つAzure Stackをオンプレミス環境に提供しています。

VMwareとVMware on AWSによるハイブリッド環境という選択肢もありますが、こちらはどちらかというとハイブリッドクラウドよりもハイブリッドデータセンターに近い形態と言えるでしょう。

GoogleからもパブリッククラウドのGoogle Kubernetes Engine(GKE)とオンプレミスのGKE-OnPremによるハイブリッドクラウドを実現する製品が2018年7月に発表されました。こちらはまだ発表直後の状況のため今後の動きに注目したいところです。

2の例としてはCloud FoundryやOpenShift等が挙げられます。これらはオンプレミスの物理あるいは仮想基盤上にOSベースで構築することもできますし、AzureやAWS上でIaaSを利用して構築する事もできます。構築された環境上では場所を問わずに一貫性のあるプラットフォームを構築することができます。特にコンテナベースのクラウドネイティブシステムの構築が行えます。付け加えるとこれらはAzure Stack上に構築することも可能です。

どの層で一貫性を保った環境を構築、保持するがよいのかは組織で利用したいサービスの違いや基盤管理をどこまで行いたいか等で異なってくるでしょう。

## プライベートクラウドの構築および運用管理

オンプレミスでクラウドネイティブシステムを稼働させるためのプライベートクラウド基盤としては極力運用コストがかからないものが求められます。クラウドネイティブシステム自体がよりビジネススピードを向上させることに重きをおいたアーキテクチャであるため、プライベートクラウド基盤自体の構築や運用管理に時間がかかってしまうことは本末転倒であるためです。そして同時に、パブリッククラウドとの一貫性を保ちつづけるために簡単に更新し続けられる基盤であることも求められます。

この点に関しては統合システムとして内部が隠蔽されており、継続的に一貫性維持のためにUpdateが提供され続けるAzure Stackのユニークさが際立ちます。パブリッククラウド上でクラウドネイティブシステムを構築する際にはその物理的な基盤を意識する必要が無いように、オンプレミス上でクラウドネイティブシステムを構築する際にも極力その物理的な構成やクラウドシステムを維持する仮想マシン等のコンポーネントを意識して管理する必要が無い方が望ましいと考える組織も多いでしょう。

逆に全てのコントロールを自組織で行う必要があると考える場合にはオープンなものを採用するということになるでしょう。

## ハイブリッド環境の具体的な使い方と「スタイル」

ここまでで、ハイブリッドクラウド自体のもつメリットから始まり、ハイブリッドクラウドとハイブリッドデータセンターの違いや、クラウドネイティブシステムの重要性、それらを実行するための基盤の話を説明してきました。

オンプレミスという場所とパブリッククラウドという場所がある中でその利用方法は様々な形態があります。そして組織によって置かれている状況や求められるものが異なることから、システムアーキテクチャに求められるものも異なります。

どれが良い、悪いということではなく、ハイブリッドクラウド研究会では「それぞれの組織が置かれた状況により最適なクラウドの利用方法は異なる」という考えのもと、その利用「スタイル」とそれぞれの「スタイル」に基づいた利用ユースケースを収集しました。

次の章からは具体的なハイブリッド環境の利用スタイル、スタイル間の関係性、スタイル選択時の考慮点、それぞれのスタイルに関連する利用ユースケース等について記載します。